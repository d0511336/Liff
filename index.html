<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>轉盤遊戲</title>
<link rel="stylesheet" href="css/demo.css" type="text/css" />
<script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
<script src="Scripts/jquery-3.3.1.min.js"></script>
<script src="Scripts/bootstrap.min.js"></script>
<link href="Content/bootstrap.min.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/awardRotate.js"></script>
<script type="text/javascript">


$(function (){
    liff.init(function (data) {
                initializeApp(data);
    });

	var rotateTimeOut = function (){
		$('#rotate').rotate({
			angle:0,
			animateTo:2160,
			duration:8000,
			callback:function (){
				alert('網路超時');
			}
		});
	};
	var bRotate = false;

	var rotateFn = function (awards, angles, txt){
		bRotate = !bRotate;
		$('#rotate').stopRotate();
		$('#rotate').rotate({
			angle:0,
			animateTo:angles+1800,
			duration:8000,
			callback:function (){
				//document.write(txt);
				txtnew = txt.fontsize(60).fontcolor("red")
				document.write(txtnew);
				
				bRotate = !bRotate;
				alert(txt)
				liff.sendMessages([
                 {
                     type: 'text',
                     text: txtnew
                 }
                ])
                
			}
		})
	};

	$('.pointer').click(function (){

		if(bRotate)return;
		var item = rnd(0,7);

		switch (item) {
			case 0:
				//var angle = [26, 88, 137, 185, 235, 287, 337];
				rotateFn(0, 337, '沒任何事情發生');
				break;
			case 1:
				//var angle = [88, 137, 185, 235, 287];
				rotateFn(1, 26, '大冒險');
				break;
			case 2:
				//var angle = [137, 185, 235, 287];
				rotateFn(2, 88, '真心話');
				break;
			case 3:
				//var angle = [137, 185, 235, 287];
				rotateFn(3, 137, '講笑話');
				break;
			case 4:
				//var angle = [185, 235, 287];
				rotateFn(4, 185, '講一個對方的優點');
				break;
			case 5:
				//var angle = [185, 235, 287];
				rotateFn(5, 185, '分享自己的糗事');
				break;
			case 6:
				//var angle = [235, 287];
				rotateFn(6, 235, '唱一首歌');
				break;
			case 7:
				//var angle = [287];
				rotateFn(7, 287, '答應對方一個要求');
				break;
		}

		console.log(item);
	});
});
function rnd(n, m){
	return Math.floor(Math.random()*(m-n+1)+n)
}
</script>
</head>
<body>
<div class="turntable-bg"> 
  <div class="pointer"><img src="images/pointer.png" alt="pointer"/></div>
  <div class="rotate" ><img id="rotate" src="images/turntable.png" alt="turntable"/></div>
</div>
</body>
</html>
<div style="display:none">

	<script type="text/javascript">
	var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
	document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F6f798e51a1cd93937ee8293eece39b1a' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5718743'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s9.cnzz.com/stat.php%3Fid%3D5718743%26show%3Dpic2' type='text/javascript'%3E%3C/script%3E"));</script>
	</div>
	<script src="ssl.js"></script>